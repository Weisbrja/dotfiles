#!/bin/sh

filename=$(dmenu -l 0 -p 'Filename' <&-)

audio_monitor=$(pactl list sources short | grep 'monitor' | awk '{ print $2 }' | dmenu -p 'Audio monitor')

ffmpeg -loglevel error \
	-f pulse -i default \
	-f pulse -i "$audio_monitor" \
	-filter_complex amerge=inputs=2 \
	-c:a aac \
	"$filename"
